
trigger:
- master


# To manually select a Xamarin SDK version on the Microsoft-hosted macOS agent,
# configure this task with the *Mono* version that is associated with the
# Xamarin SDK version that you need, and set the "enabled" property to true.
# See https://go.microsoft.com/fwlink/?linkid=871629
#- script: sudo $AGENT_HOMEDIRECTORY/scripts/select-xamarin-sdk.sh 5_12_0
#  displayName: 'Select the Xamarin SDK version'
#  enabled: false

jobs: 

- job: macos
  pool:
    vmImage: 'macos-latest'
  steps:
  - script: |
      pwd
      ls -lR 
    displayName: List contents

  - script: |
      make fetch-runtimes
    displayName: Downloading the Wasmer Native Runtimes

  - script: |
      msbuild /p:Configuration=Release WasmerSharp/WasmerSharp.csproj
    displayName: Build WasmerSharp

  - task: PublishBuildArtifacts@1
    inputs: 
      pathtoPublish: WasmerSharp/bin/Release
      ArtifactName: drop